<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Usar GitHub Actions para automatizar la generación y despliegue de un blog estático creado con VuePress en GitHub Pages | Rafael Neto</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/images/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/images/icons/icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#8a278c">
    <link rel="alternate" type="application/rss+xml" href="https://rneto.es/rss.xml" title="Rafael Neto RSS Feed">
    <meta name="description" content="

Tras unos meses con mi blog creado con VuePress, he dedicido automatizar la generación y despliegue en GitHub Pages de los nuevos artículos como este.

Para ello ...">
    <meta property="article:published_time" content="2020-10-19T00:00:00.000Z">
    <meta property="og:site_name" content="Rafael Neto">
    <meta property="og:title" content="Usar GitHub Actions para automatizar la generación y despliegue de un blog estático creado con VuePress en GitHub Pages">
    <meta property="og:description" content="

Tras unos meses con mi blog creado con VuePress, he dedicido automatizar la generación y despliegue en GitHub Pages de los nuevos artículos como este.

Para ello ...">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/blog/usar-github-actions-automatizar-generacion-despliegue-blog-estatico-vuepress-github-pages/">
    <meta name="twitter:title" content="Usar GitHub Actions para automatizar la generación y despliegue de un blog estático creado con VuePress en GitHub Pages">
    <meta name="twitter:description" content="

Tras unos meses con mi blog creado con VuePress, he dedicido automatizar la generación y despliegue en GitHub Pages de los nuevos artículos como este.

Para ello ...">
    <meta name="twitter:url" content="/blog/usar-github-actions-automatizar-generacion-despliegue-blog-estatico-vuepress-github-pages/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="VuePress, GitHubActions">
    <meta property="article:tag" content="VuePress">
    <meta name="theme-color" content="#8a278c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/images/icons/icon-144x144">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.34cc10db.css" as="style"><link rel="preload" href="/assets/js/app.c6afc0c4.js" as="script"><link rel="preload" href="/assets/js/8.4155328b.js" as="script"><link rel="preload" href="/assets/js/3.daf20502.js" as="script"><link rel="preload" href="/assets/js/39.7c90d7a7.js" as="script"><link rel="preload" href="/assets/js/9.46140f75.js" as="script"><link rel="prefetch" href="/assets/js/10.c66dc6eb.js"><link rel="prefetch" href="/assets/js/11.0859c5f2.js"><link rel="prefetch" href="/assets/js/12.dda17e0d.js"><link rel="prefetch" href="/assets/js/13.cc76f2d3.js"><link rel="prefetch" href="/assets/js/14.7d6d8b5b.js"><link rel="prefetch" href="/assets/js/15.7444241f.js"><link rel="prefetch" href="/assets/js/16.3a5575f2.js"><link rel="prefetch" href="/assets/js/17.5ab4de7a.js"><link rel="prefetch" href="/assets/js/18.fcf5f987.js"><link rel="prefetch" href="/assets/js/19.10492db0.js"><link rel="prefetch" href="/assets/js/20.37e5d098.js"><link rel="prefetch" href="/assets/js/21.b7f0acbf.js"><link rel="prefetch" href="/assets/js/22.03b91290.js"><link rel="prefetch" href="/assets/js/23.dff5b85a.js"><link rel="prefetch" href="/assets/js/24.8909442f.js"><link rel="prefetch" href="/assets/js/25.d21ee7b0.js"><link rel="prefetch" href="/assets/js/26.6f4069c9.js"><link rel="prefetch" href="/assets/js/27.8df12cd8.js"><link rel="prefetch" href="/assets/js/28.fdac100a.js"><link rel="prefetch" href="/assets/js/29.6058f4a0.js"><link rel="prefetch" href="/assets/js/30.f605256a.js"><link rel="prefetch" href="/assets/js/31.c571e16a.js"><link rel="prefetch" href="/assets/js/32.4fe1f3b0.js"><link rel="prefetch" href="/assets/js/33.ee3d5fe3.js"><link rel="prefetch" href="/assets/js/34.0556425a.js"><link rel="prefetch" href="/assets/js/35.4f196f1b.js"><link rel="prefetch" href="/assets/js/36.8247b6ba.js"><link rel="prefetch" href="/assets/js/37.f8156d47.js"><link rel="prefetch" href="/assets/js/38.6c76a4e9.js"><link rel="prefetch" href="/assets/js/4.3c7dd51c.js"><link rel="prefetch" href="/assets/js/40.172dd030.js"><link rel="prefetch" href="/assets/js/41.3f4a309e.js"><link rel="prefetch" href="/assets/js/42.8b5a61ed.js"><link rel="prefetch" href="/assets/js/5.ea665055.js"><link rel="prefetch" href="/assets/js/6.e64689b4.js"><link rel="prefetch" href="/assets/js/7.83269844.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.dbcc377a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.34cc10db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">Rafael Neto </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">Rafael Neto </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        
      </h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2020-10-19T00:00:00.000Z">
      Oct 19 2020
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/tag/VuePress" data-v-42ccfcd5><span data-v-42ccfcd5>VuePress</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/GitHubActions" data-v-42ccfcd5><span data-v-42ccfcd5>GitHubActions</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h1 id="usar-github-actions-para-automatizar-la-generacion-y-despliegue-de-un-blog-estatico-creado-con-vuepress-en-github-pages"><a href="#usar-github-actions-para-automatizar-la-generacion-y-despliegue-de-un-blog-estatico-creado-con-vuepress-en-github-pages" class="header-anchor">#</a> Usar GitHub Actions para automatizar la generación y despliegue de un blog estático creado con VuePress en GitHub Pages</h1> <!----> <p>Tras unos meses con <a href="/blog/crear-blog-estatico-vuepress/">mi blog creado con VuePress</a>, he dedicido automatizar la generación y despliegue en GitHub Pages de los nuevos artículos como este.</p> <p>Para ello me he basado en una acción generada en GitHub explícitamente para dicho fin llamada <a href="https://github.com/marketplace/actions/vuepress-deploy" target="_blank" rel="noopener noreferrer">Vuepress deploy<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="uso"><a href="#uso" class="header-anchor">#</a> Uso</h2> <p>A continuación seguiremos los pasos indicados en dicha acción a los que he añadido una serie de apuntes de mi cosecha.</p> <h3 id="paso-1-crear-el-fichero-de-la-accion"><a href="#paso-1-crear-el-fichero-de-la-accion" class="header-anchor">#</a> Paso 1. Crear el fichero de la acción</h3> <p>Debemos crear el fichero <em>vuepress-deploy.yml</em> en la carpeta <em>.github/workflows</em> del directorio ráiz de nuestro repositorio de origen, es decir, en el que tenemos el código fuente de nuestro blog creado con VuePress. El contenido del fichero debe ser el siguiente:</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> Build and Deploy
<span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>push<span class="token punctuation">]</span>
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build-and-deploy</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout
      <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@master

    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> vuepress<span class="token punctuation">-</span>deploy
      <span class="token key atrule">uses</span><span class="token punctuation">:</span> jenkey2011/vuepress<span class="token punctuation">-</span>deploy@master
      <span class="token key atrule">env</span><span class="token punctuation">:</span>
        <span class="token key atrule">ACCESS_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.ACCESS_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">TARGET_REPO</span><span class="token punctuation">:</span> tu<span class="token punctuation">-</span>usuario<span class="token punctuation">-</span>github/tu<span class="token punctuation">-</span>repositorio<span class="token punctuation">-</span>destino<span class="token punctuation">-</span>blog<span class="token punctuation">-</span>vuepress<span class="token punctuation">-</span>compilado
        <span class="token key atrule">TARGET_BRANCH</span><span class="token punctuation">:</span> master
        <span class="token key atrule">BUILD_SCRIPT</span><span class="token punctuation">:</span> yarn <span class="token important">&amp;&amp;</span> yarn build
        <span class="token key atrule">BUILD_DIR</span><span class="token punctuation">:</span> blog/.vuepress/dist/
</code></pre></div><p>Si quieres ver cómo he configurado mi dominio personalizado <em>rneto.es</em> de GitHub para el correcto despliegue y posterior funcionamiento de la web, échale un vistazo a mi fichero <a href="https://github.com/rneto/rneto-es-blog-vuepress/blob/master/.github/workflows/vuepress-deploy.yml" target="_blank" rel="noopener noreferrer">vuepress-deploy.yml<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, donde encontrarás la configuración CNAME necesaria.</p> <p>En mi caso, he creado dichos directorios y fichero desde Visual Studio Code y cuando he intentado sincronizarlo con mi rama <em>master</em> de origen la primera vez, me he encontrado con el siguiente error:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>remote rejected<span class="token punctuation">]</span> master -<span class="token operator">&gt;</span> master <span class="token punctuation">(</span>refusing to allow an OAuth App to create or update workflow <span class="token variable"><span class="token variable">`</span>.github/workflows/vuepress-deploy.yml<span class="token variable">`</span></span> without <span class="token variable"><span class="token variable">`</span>workflow<span class="token variable">`</span></span> scope<span class="token punctuation">)</span>
</code></pre></div><p>Al parecer es un <a href="https://github.com/microsoft/vscode/issues/97396" target="_blank" rel="noopener noreferrer">error identificado en Visual Studio Code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> relacionado con las credenciales que han sido creadas con cierta antigüedad mediante Visual Studio Code como aplicación OAuth en Github.</p> <p>Si a tí te llega a pasar lo mismo, puedes eliminar tus credenciales de GitHub de Windows para que Visual Studio Code te pida autenticarte nuevamente cuando vuelvas a conectarte a algún repositorio remoto de GitHub. Este manual de <a href="https://cmatskas.com/how-to-update-your-git-credentials-on-windows/" target="_blank" rel="noopener noreferrer">cómo eliminar tus credenciales de Git de Windows<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> puede servirte como referencia.</p> <h3 id="paso-2-crear-un-token-personal-en-github"><a href="#paso-2-crear-un-token-personal-en-github" class="header-anchor">#</a> Paso 2. Crear un token personal en GitHub</h3> <p>Pulsa en el <em>icono de tu perfil de GitHub &gt; Settings &gt; Developer settings &gt; Personal access tokens &gt; Generate new token &gt; Marca el check &quot;repo&quot;</em>. Entonces obtendrás un token que deberás copiar para usar en el siguiente paso.</p> <h3 id="paso-3-crear-una-clave-secreta"><a href="#paso-3-crear-una-clave-secreta" class="header-anchor">#</a> Paso 3: Crear una clave secreta</h3> <p>En tu repositorio  donde tengas tu código de VuePress, accede a <em>Settings &gt; Secrets &gt; Create a new secret</em> y escribe ACCESS_TOKEN en la caja &quot;Name&quot; y pega el token personal en la caja &quot;Value&quot;.</p> <p>Y eso es todo. Con estos simples pasos, al subir un nuevo cambio al repositorio de origen, automáticamenet se generarán y publicarán en el repositorio de destino donde tengas tu blog VuePress publicado.</p> <hr> <!----></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#uso" title="Uso">Uso</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#paso-1-crear-el-fichero-de-la-accion" title="Paso 1. Crear el fichero de la acción">Paso 1. Crear el fichero de la acción</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#paso-2-crear-un-token-personal-en-github" title="Paso 2. Crear un token personal en GitHub">Paso 2. Crear un token personal en GitHub</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#paso-3-crear-una-clave-secreta" title="Paso 3: Crear una clave secreta">Paso 3: Crear una clave secreta</a></div></div></div></div> <footer class="footer" data-v-fdbf4940><div class="footer-left-wrap" data-v-fdbf4940><ul class="contact" data-v-fdbf4940><li class="contact-item" data-v-fdbf4940><a href="https://mobile.twitter.com/RNeto" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-fdbf4940><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-fdbf4940><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-fdbf4940></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-fdbf4940><ul class="copyright" data-v-fdbf4940><li class="copyright-item" data-v-fdbf4940><a href="/index.html" class="nav-link" data-v-fdbf4940>Rafael Neto © 2021</a></li></ul></div></footer></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/assets/js/app.c6afc0c4.js" defer></script><script src="/assets/js/8.4155328b.js" defer></script><script src="/assets/js/3.daf20502.js" defer></script><script src="/assets/js/39.7c90d7a7.js" defer></script><script src="/assets/js/9.46140f75.js" defer></script>
  </body>
</html>
